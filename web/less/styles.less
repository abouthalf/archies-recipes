@import "normalize.less";
@import "font-awesome";
@import "baseType.less";

* { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

@baseFontSize: 16px;

@darkAccent: #918a77;
@mediumAccent: #b6b3aa;

@backgroundColor: #f2f2ee;
@altbackgroundColor: lighten(@backgroundColor,10%);
@headerFontColor: #918a77;

@headerWidth: 12rem;
@sidebarWidth: 12rem;
@contentPadding: 1.5rem;

/* base styles */
html, body {height: 100%;}

body
{
	background-color: @backgroundColor;
}

header
{
	background-color: @altbackgroundColor;
	border-bottom: .5em solid @mediumAccent;
	padding: .5em;
	line-height: 1;
	h1
	{
		width: @headerWidth;
		font-size: 1.5rem;
		display: inline-block;
		vertical-align: middle;
		padding-left: 5rem;
		margin: 0;
		background-image: url('/css/images/logo.png');
		background-position: left center;
		background-size: auto (@baseFontSize * 4);
		background-repeat: no-repeat;
	}
	nav
	{
		display: inline-block;
		vertical-align: middle;
		line-height: 1;
		margin-left: @contentPadding;
		margin-bottom: 0;
		ul
		{
			li
			{
				display: inline-block;
				vertical-align: middle;
				&:after
				{
					content: ' | ';
				}
				&:last-child:after {content: none;}
			}
		}
	}
}

header, footer, h1, h2, h3, h4, h5, h6
{
	color: @headerFontColor;
	font-weight: normal;
}

nav
{
	ul, li
	{
		margin-left: 0;
		padding-left: 0;
	}
}

nav.breadcrumb
{
	margin-top: @baseFontSize * 1.5rem;
	margin-top: 1.5rem;
	.universalMarginBottom;
	ul
	{
		margin: 0;
		padding: 0;
		.small;
		li
		{
			display: inline-block;
			&:before
			{
				content: '» ';
			}
			&:first-child:before
			{
				content: '';
			}
		}
	}
}

nav.pageNav
{
	position: fixed;
	left: @contentPadding;
	top: @sidebarWidth + 15rem;
	.big;
	line-height: 1.5;
}

aside
{
	position: fixed;
	top: 7rem;
	left: @contentPadding;
	width: @sidebarWidth;
	text-align: center;

	a
	{
		width: 100%;
		display: block;
		position: relative;
		max-height: 300px;
		overflow: hidden;
		border: .25em solid @darkAccent;
		&:focus {outline: none;}
		img
		{
			display: block;
			width: 100%;
			height: auto;
			border: .5em solid @mediumAccent;
		}
		span
		{
			position: absolute;
			bottom: @baseFontSize;
			bottom: 1rem;
			opacity: 0;
			left: 0;
			width: 100%;
			display: block;
			text-align: center;
			color: @altbackgroundColor;
			text-shadow: 0 2px 3px @darkAccent;
			-webkit-transition: opacity 250ms ease-in-out;
			-moz-transition: opacity 250ms ease-in-out;
			-ms-transition: opacity 250ms ease-in-out;
			-o-transition: opacity 250ms ease-in-out;
			transition: opacity 250ms ease-in-out;
		}
		&:hover span {opacity: 1;}
	}

	a.closer {display: none}

	&.modal
	{
		position: absolute;
		// reset all positions
		top: 0;
		left: 0;
		bottom: auto;
		right: auto;
		z-index: 100;
		width: 100%;
		min-height: 100%;
		margin-bottom: 0;
		background: @altbackgroundColor;
		border: none;
		padding: @contentPadding * 2;
		a {
			float: none;
			border: none;
			width: auto;
			max-height: none;
			overflow: visible;
			span
			{
				display: none;
			}
		}
		img
		{
			border: none;
			display: block;
			width: 100%;
			height: auto;
			max-height: none;
//			max-width: none;
		}
		a.closer
		{
			position: absolute;
			border: none;
			top: 1rem;
			right: 1rem;
			display: block;
			color: @baseTypeColor;
		}
	}
}

div.page,
div.archives
{
	margin-top: @contentPadding;
	margin-left: @headerWidth + 2;
	margin-right: @headerWidth + 2;
	padding-left: 1.5rem;
	min-height: 20rem;
	article
	{
		&:after
		{
			content: '✻';
			display: block;
			.universalMarginBottom;
			.big;
			color: @quietType;
			text-align: center;
		}
		&:last-of-type:after {content: none;}

		table
		{
			width: 100%;
			tr
			{
				td, th
				{
					border-bottom: 1px solid @altbackgroundColor;
				}
				&:last-child
				{
					td, th
					{
						border: none;
					}
				}
			}
		}
	}
}


aside + div.page
{
	margin: @contentPadding @contentPadding @contentPadding (@sidebarWidth + @contentPadding);
}

aside + div.page + footer
{
	margin-left: @sidebarWidth;
}

footer
{
	.small;
	a
	{
		display: block;
		background-image: url('/css/images/abouthalfLogo.png');
		background-position: center bottom;
		background-repeat: no-repeat;
		background-size: auto @headerWidth/4;
		padding-bottom: @headerWidth/4;
	}

	text-align: center;
	padding: @contentPadding;

}

/* Forms */
form
{
	label
	{
		display: block;
		&.required:after
		{
			content: '*';
			color: #600;
		}
	}
	input[type=text],
	input[type=email],
	textarea
	{
		font-family: Helvetica, Arial, sans-serif;
		color: @mediumAccent;
		width: 90%;
		.big;
		padding: 12px;
		padding: .5rem;
		border: 1px solid @mediumAccent;
		display: block;
		.universalMarginBottom;
	}
	textarea
	{
		min-height: 192px;
		min-height: 8rem;
		resize: vertical;
	}
	input[type=submit]
	{
		border: 0;
		-webkit-border-radius: .25rem;
		border-radius: 25rem;
		background: @darkAccent;
		color: @altbackgroundColor;
		padding: 12px 24px;
		padding: .5rem 1rem;
		&:hover
		{
			background: lighten(@darkAccent,20)
		}
		&:active
		{
			background: darken(@darkAccent,10);
		}
	}

	div
	{
		ul
		{
			margin-left: 0;
			padding-left: 0;
			li
			{
				list-style: none;
				color: #600;
				font-weight: bold;
				font-style: italic;
			}
		}
	}

}


/* skinny wide monitors, netbooks, kindle fire */
@media screen and (max-height: 30em)
{
// on smallish widish monitors, un-fix elements so they scroll with the page.
	aside,
	nav.pageNav
	{
		position: absolute;
	}
}

/* small screen */
@media screen and (max-width: 37.5em)
{
	header
	{
		padding: .25rem;
		.universalMarginBottom;
		h1, nav {display: block;}
		h1 {.universalMarginBottom;}
	}

	aside
	{
		position: static;
		margin: 0 auto;
		.universalMarginBottom;
		a
		{
			img
			{
				margin: 0 auto;
			}
		}
	}

	nav.pageNav {position: static;}

	div.page,
	div.archives,
	aside + div.page
	{
		min-height: auto;
		padding: 0;
		margin-left: @contentPadding;
		margin-right: @contentPadding;
	}

	aside + div.page + footer
	{
		margin-left: 0;
	}
}



/* wide screen */
@media screen and (min-width: 64em) and (min-height: 37.5em)
{

	header
	{
		position: fixed;
		top: 0;
		right: 0;
		z-index: 90;
		width: @sidebarWidth;
		border: none;
		border-left: .5em solid @mediumAccent;
		min-height: 100%;
		h1, nav
		{
			display: block;
			.universalMarginBottom;
		}
		nav
		{
			line-height: 1.5;
			margin-left: 5rem;
			ul
			{
				li
				{
					display: block;
					&:after
					{
						content: none;
					}
				}
			}
		}
	}

	aside
	{
		position: fixed;
		top: 0;
		left: 0;
		width: 40%;
		height: 100%;
		padding: 3rem 0;
		border: none;
		background-color: @backgroundColor;
		&.modal
		{
			height: auto;
			margin-bottom: 0;
			a
			{
				height: auto;
				width: auto;
				img
				{
					max-width: none;
					max-height: none;
				}
			}
		}
		a
		{
			text-align: right;
			height: 100%;
			border: none;
			max-height: none;
			img
			{
				display: inline;
				width: auto;
				height: auto;
				min-height: 1em;
				max-width: 100%;
				max-height: 100%;
			}
			span
			{
				right: 1rem;
				bottom: 1rem;
				left: auto;
				width: auto;
				display: inline;
			}
		}

	}

	div.page, div.archives
	{
		position: static;
		margin: 0 @sidebarWidth 0 @sidebarWidth
	}

	aside + div.page,
	aside + div.page + footer
	{
		width: 60%;
		margin-left: 40%;
		padding-left: @contentPadding;
		padding-right: @headerWidth + @contentPadding;
	}

	article {max-width: 40em;} // readability!

	nav.pageNav
	{
		.big;
		line-height: 1.5; // reset line height for clickability
		position: fixed;
		left: auto;
		top: auto;
		bottom: 30%;
		right: 0;
		width: @sidebarWidth;
		padding-left: 3rem;
		z-index: 91;
	}

}

/* IE 8 compat */
.lt-ie9
{
	header
	{

		h1
		{
			font-size: @baseFontSize * 1.5rem;
			width: @baseFontSize * (@headerWidth - 5);
			//padding-left: @baseFontSize * 5rem;
		}
	}
	aside
	{
		//position: static;
		width: @baseFontSize * @sidebarWidth;
		top: @baseFontSize * 7rem;
		left: @baseFontSize * @contentPadding;
		&.modal
		{
			position: absolute;
			top: 0;
			left: 0;
			z-index: 100;
			width: 100%;
			min-height: 100%;
			padding: @baseFontSize * @contentPadding * 2;
			a.closer
			{
				width: @baseFontSize * 5rem;
				top: 1em;
				right: 1em;
			}
		}
	}

	nav.pageNav
	{
		top: @baseFontSize * ( @sidebarWidth + 16 );
		left: 1.5 * @baseFontSize;
	}

	div.page,
	div.archives
	{
		margin-top: @baseFontSize * @contentPadding;
		margin-left: @baseFontSize * (@headerWidth + 2);
		margin-right: @baseFontSize * (@headerWidth + 2);
		padding-left: @baseFontSize * 1.5rem;
		min-height: @baseFontSize * 20rem;
	}

	aside + div.page
	{
		margin: (@baseFontSize * @contentPadding) (@baseFontSize * @sidebarWidth) (@baseFontSize * @contentPadding) ((@baseFontSize * @sidebarWidth) + 24px);
	}

	aside + div.page + footer
	{
		margin-left: @baseFontSize * @sidebarWidth;
	}

	footer
	{
		a
		{
			background: none;
		}
	}
}


/* utilities */
.hidden {display: none;}